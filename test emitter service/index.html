<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular.min.js"></script>
	<script src="https://s3-eu-west-1.amazonaws.com/cdn.emitter.io/js/emitter.min.js" type="text/javascript"></script>

	<script src="emitterService.js"></script>

    <script>
		var emitterKey = "Ue3lrRHQiAN42qyEOvS5zpcD8I-0WAS0";
		var emitter = emitter.connect(
		{
			secure: true
		});

		var ctrl = function(emitterService){
		
			function msgReceived(msg)
			{
				console.log(msg);
			}
		
			emitterService.subscribe("test", msgReceived);
			emitterService.publish("t", {a: "b"}, "test");
		
		};
		angular.module("minesweeper", [])
		.value("emitterKey", "Ue3lrRHQiAN42qyEOvS5zpcD8I-0WAS0")
		.value("baseChannel", "minesweeper")
		.factory("emitterService", ["emitterKey", "baseChannel", emitterService])
		.controller("ctrl", ctrl);
    </script>

	<title>Minesweeper</title>
	<meta charset="utf-8" />

</head>
<body ng-app="minesweeper" ng-controller="ctrl">
test

</body>
</html>
